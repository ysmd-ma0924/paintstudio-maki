/* main.css - 塗装工房 牧 (Dark Neon ver.) */
:root{
  --c-magenta:#ff2bbb; --c-cyan:#00d0ff; --c-lime:#78ff00; --c-orange:#ff7a00;
  --c-bg:#0a0b0f; --c-surface:#11131a; --c-surface-2:#171a22; --c-border:#262a33;
  --c-text:#e9ecf1; --c-text-dim:#b7bfcc;
  --radius:18px; --wrap: min(1100px, 92vw);
}

*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  margin:0; color:var(--c-text); background:var(--c-bg);
  font-family: 'Noto Sans JP', system-ui, -apple-system, Segoe UI, Roboto, 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
  line-height:1.7;
  background-image: radial-gradient(700px 300px at 20% -10%, rgba(255,43,187,.12), transparent 60%),
                    radial-gradient(600px 280px at 80% 0%, rgba(0,208,255,.10), transparent 60%),
                    radial-gradient(600px 300px at 50% 110%, rgba(120,255,0,.08), transparent 60%);
  background-attachment: fixed;
}
/* 横スクロール抑止（コンテンツのはみ出し対策） */
body{ overflow-x:hidden }

.wrap{width:var(--wrap); margin-inline:auto; padding: 22px}
.center{text-align:center}

.site-header{
  position:sticky; top:0; z-index:40;
  background:rgba(10,11,15,.65);
  backdrop-filter: blur(10px) saturate(1.1);
  border-bottom:1px solid var(--c-border);
}
.site-header .wrap{display:flex; align-items:center; justify-content:space-between}
.logo img{display:block; filter: drop-shadow(0 2px 6px rgba(0,0,0,.6))}
.nav a{margin-left:16px; text-decoration:none; color:var(--c-text); font-weight:800; opacity:.9}
.nav a:hover{opacity:1; text-shadow:0 0 6px rgba(255,255,255,.18)}

.hero{
  position:relative; overflow:hidden; padding: 90px 0 110px;
  background:
    radial-gradient(1000px 500px at 85% 20%, rgba(0,208,255,.38), transparent 70%),
    radial-gradient(900px 480px at 20% 10%, rgba(255,43,187,.32), transparent 70%),
    radial-gradient(700px 480px at 50% 100%, rgba(120,255,0,.22), transparent 70%);
}
.hero-bg{position:absolute; inset:0; z-index:0; pointer-events:none; mix-blend-mode: screen; opacity:.65}
.hero-bg img{width:100%; height:100%; object-fit:cover}
.hero-inner{position:relative; z-index:1}
.hero h1{
  font-size: clamp(30px, 5vw, 56px); margin:0 0 10px; font-weight:1000; letter-spacing:.01em;
  text-shadow: 0 0 10px rgba(255,43,187,.35), 0 0 18px rgba(0,208,255,.25);
}
.hero .sub{margin:0 0 18px; font-size:clamp(14px, 2.2vw, 18px); color:var(--c-text-dim)}
.cta-group{display:flex; gap:12px; flex-wrap:wrap}
.btn{display:inline-flex; align-items:center; justify-content:center; padding:14px 18px; border-radius:14px; text-decoration:none; font-weight:900; color:#001}
.btn-phone{background:linear-gradient(90deg,var(--c-magenta),var(--c-orange)); color:#fff; text-shadow:0 0 6px rgba(0,0,0,.4)}
.btn-secondary{background:linear-gradient(90deg,var(--c-cyan),var(--c-lime));}

.section{padding:64px 0}
.section.alt{background:var(--c-surface)}
.cards{display:grid; gap:16px; grid-template-columns: repeat(3,1fr)}
.card{background:var(--c-surface-2); border:1px solid var(--c-border); border-radius:16px; padding:18px; box-shadow:0 12px 40px rgba(0,0,0,.25)}
.card h3{margin:0 0 8px}
.card p{margin:0; color:var(--c-text-dim)}

@media (max-width: 860px){
  .cards{grid-template-columns: 1fr}
}

.headline-drip{position:relative; display:inline-block; padding-bottom:14px}
.headline-drip::after{
  content:""; position:absolute; left:0; right:0; bottom:-8px; height:10px;
  background:linear-gradient(180deg, rgba(255,255,255,.0), rgba(255,255,255,.12));
  border-radius:0 0 10px 10px;
  transform-origin:top; transform:scaleY(0); transition:transform .2s ease .0s;
}
.section:has(.wrap) .wrap:has(.headline-drip) .headline-drip.inview::after{ transform:scaleY(1) }

/* カラーシミュレーター */
.color-sim{display:grid; grid-template-columns: 1.2fr .8fr; gap:24px; align-items:center}
.house svg{width:100%; height:auto; filter: drop-shadow(0 12px 32px rgba(0,0,0,.45))}
.swatches{display:flex; gap:10px; flex-wrap:wrap; margin-bottom:14px}
.swatch{
  width:34px; height:34px; border-radius:999px; border:2px solid #111;
  background:var(--sw); cursor:pointer;
  transition: transform .15s ease, box-shadow .2s ease;
  box-shadow: 0 0 12px color-mix(in oklab, var(--sw), transparent 70%);
}
.swatch:focus-visible{outline:3px solid #fff; outline-offset:2px}
.swatch:active{transform:scale(.92)}

/* 追加: RGBパネル */
.picker-panel{
  background:var(--c-surface-2); border:1px solid var(--c-border); border-radius:16px; padding:14px; box-shadow:0 10px 34px rgba(0,0,0,.25)
}
.picker-row{display:grid; grid-template-columns: 1fr auto 80px; gap:10px; align-items:center; margin-bottom:10px}
.picker-row input[type=range]{width:100%}
.picker-row input[type=number]{width:80px; background:#0c0e13; color:var(--c-text); border:1px solid var(--c-border); border-radius:10px; padding:6px}
.hex-row{display:flex; gap:10px; align-items:center; margin:10px 0}
.hex-row input[type=text]{flex:1; background:#0c0e13; color:var(--c-text); border:1px solid var(--c-border); border-radius:10px; padding:8px 10px}
input[type=color]{width:42px; height:42px; border:none; background:transparent; padding:0;}

.palette-grid{display:grid; grid-template-columns: repeat(12, 1fr); gap:8px; margin-top:12px}
.palette-swatch{
  width:100%; aspect-ratio:1/1; border-radius:10px; border:1px solid rgba(255,255,255,.1);
  cursor:pointer; box-shadow:0 0 10px rgba(0,0,0,.25);
  transition: transform .12s ease, box-shadow .2s ease;
}
.palette-swatch:hover{transform:translateY(-2px); box-shadow:0 6px 18px rgba(0,0,0,.35)}

/* フッター */
.site-footer{background:#07080b; color:#fff; border-top:1px solid var(--c-border)}
.site-footer a{color:#fff; text-decoration:none}
.site-footer .wrap{display:grid; grid-template-columns:1fr auto; gap:20px; align-items:start}
.site-footer .f-nav{display:flex; gap:16px; flex-wrap:wrap}
.site-footer .copy{grid-column:1/-1; opacity:.7}

/* 固定CTA */
.cta-bar{
  position:fixed; inset:auto 0 0 0; z-index:50;
  display:flex; gap:10px; padding:10px 14px;
  background:linear-gradient(180deg, rgba(10,11,15,0), rgba(10,11,15,.8));
  backdrop-filter: blur(8px);
}
.cta{flex:1; display:flex; align-items:center; justify-content:center; padding:14px 16px; border-radius:14px; font-weight:900; text-decoration:none; color:#fff}
.cta-phone{background:linear-gradient(90deg,var(--c-magenta),var(--c-orange)); box-shadow:0 0 16px rgba(255,122,0,.25)}
.cta-color{background:linear-gradient(90deg,var(--c-cyan),var(--c-lime)); box-shadow:0 0 16px rgba(0,208,255,.25)}

/* インクスプラッシュ */
#ink-container{position:fixed; inset:0; pointer-events:none; z-index:9999}
.ink-dot{
  position:absolute; border-radius:999px; opacity:1; will-change:transform,opacity;
  box-shadow: 0 0 16px rgba(255,255,255,.25), 0 0 38px currentColor;
  transition: transform .5s cubic-bezier(.2,.8,.2,1), opacity 1.6s linear;
}
/* キャンバスの100vw起因の横スクロールを抑止 */
#inkCanvas{ position:fixed; inset:0; width:100% !important; height:100dvh !important; pointer-events:none; z-index:999 }

/* ローディング */
#loading{
  position:fixed; inset:0; display:grid; place-items:center;
  background:#000; z-index:10000;
}
.loading-svg{width:min(900px, 96vw); height:auto}
.hidden{display:none !important}

/* --- KV animated logo --- */
.kv-wrap{display:grid; place-items:center; min-height: clamp(360px, 58vh, 560px);}
.kv-logo{
  width:min(90vw, 820px);
  filter: drop-shadow(0 0 26px rgba(255,255,255,.22)) drop-shadow(0 0 48px rgba(0,208,255,.18));
  opacity:0; transform: scale(.94);
  transition: opacity .9s ease, transform .9s cubic-bezier(.2,.8,.2,1);
}
.kv-logo.show{ opacity:1; transform: scale(1); }
@media (prefers-reduced-motion: no-preference){
  .kv-logo.show{ animation: kvfloat 5s ease-in-out 0.6s infinite alternate; }
  @keyframes kvfloat{
    from{ transform: translateY(0) scale(1); }
    to  { transform: translateY(-6px) scale(1.005); }
  }
}

@media (max-width: 800px){
  .site-footer .wrap{
    grid-template-columns: 1fr;
  }
  .site-footer .f-nav{
    justify-content:flex-start;
    flex-wrap:wrap;
  }
  .site-footer .f-col{
    margin-bottom:10px;
  }
}

/* --- header & footer logo --- */
.logo-img {
  max-height: 70px;
  width: auto;
  display: block;
}
@media (max-width: 800px){
  .logo-img{ max-height:45px; }
}
.footer-logo {
  max-height: 60px;
  display: block;
  margin: 0 auto 20px;
  filter: drop-shadow(0 0 10px rgba(255,255,255,.3));
}


/* ===== Hamburger (<=960px) ===== */
.nav-toggle{ display:none; position:relative; width:46px; height:44px; border:1px solid var(--c-border); border-radius:12px; background:var(--c-surface); cursor:pointer; align-items:center; justify-content:center; box-shadow:0 6px 18px rgba(0,0,0,.25); }
.nav-toggle .bar{ position:absolute; width:24px; height:2px; background:var(--c-text); left:50%; transform:translateX(-50%); transition:transform .28s ease, opacity .2s ease, top .28s ease; }
.nav-toggle .bar:nth-child(1){ top:14px }
.nav-toggle .bar:nth-child(2){ top:21px }
.nav-toggle .bar:nth-child(3){ top:28px }
.nav-toggle:focus-visible{ outline:2px solid var(--c-cyan); outline-offset:3px }

/* morph to X */
.nav-toggle.is-open .bar:nth-child(1){ top:21px; transform:translateX(-50%) rotate(45deg) }
.nav-toggle.is-open .bar:nth-child(2){ opacity:0 }
.nav-toggle.is-open .bar:nth-child(3){ top:21px; transform:translateX(-50%) rotate(-45deg) }

/* backdrop */
.nav-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.45); -webkit-backdrop-filter: blur(4px); backdrop-filter: blur(4px); z-index:39; }

/* drawer transforms the existing .nav */
@media (max-width:960px){
  .site-header .wrap{ gap:12px }
  .nav-toggle{ display:flex }
  .nav-backdrop[hidden]{ display:none }

  .nav{ position:fixed; top:0; right:0; height:100dvh; width:min(78vw, 360px); display:flex; flex-direction:column; padding:84px 20px 24px; gap:4px; background:var(--c-surface-2); border-left:1px solid var(--c-border); box-shadow: -16px 0 40px rgba(0,0,0,.35); transform: translateX(100%); transition: transform .32s ease; z-index:40 }
  .nav a{ display:block; padding:14px 12px; margin:0; border-radius:12px; font-weight:800; text-decoration:none; color:var(--c-text); opacity:.95; border:1px solid transparent }
  .nav a:hover{ opacity:1; background:linear-gradient(90deg, rgba(255,43,187,.08), rgba(0,208,255,.08)); border-color: var(--c-border) }
  .nav.is-open{ transform: translateX(0) }

  /* hide desktop nav gap */
  .site-header .wrap{ justify-content:space-between }
}

/* lock scroll when drawer open */
.body-no-scroll{ overflow:hidden; height:100dvh }

/* ドロワー内クローズボタン（✘） */
.nav .nav-close{
  position:absolute; top:18px; right:18px; width:40px; height:40px;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid var(--c-border); border-radius:12px;
  background:var(--c-surface); color:var(--c-text); font-size:18px; line-height:1; cursor:pointer;
  box-shadow:0 6px 18px rgba(0,0,0,.25);
}
.nav .nav-close:focus-visible{ outline:2px solid var(--c-cyan); outline-offset:3px }

/* subtle ink burst on open (optional; works if spawnInk is defined in main.js) */
.nav-toggle.ink-burst::after{ content:""; position:absolute; inset:-2px; border-radius:14px; outline:2px solid rgba(255,255,255,.14); animation: burst .45s ease both }
@keyframes burst{ from{ outline-offset:10px; opacity:1 } to{ outline-offset:20px; opacity:0 } }


/* ===== Loading Overlay ===== */
.preloader{ position:fixed; inset:0; display:grid; place-items:center; background:var(--c-bg, #0a0b0f); z-index:9999; transition:opacity .45s ease, visibility 0s linear .6s; }
.preloader__content{ display:flex; align-items:center; justify-content:center; gap:12px; padding:18px 22px; border-radius:16px; background:rgba(17,19,26,.65); border:1px solid var(--c-border, #262a33); box-shadow:0 10px 40px rgba(0,0,0,.45); }
.preloader__img{ width:88px; height:auto; display:block; filter: drop-shadow(0 2px 8px rgba(0,0,0,.35)); animation: floatY 1.2s ease-in-out infinite; }
@keyframes floatY{ 0%{ transform:translateY(0) } 50%{ transform:translateY(-6px) } 100%{ transform:translateY(0) } }
.preloader.is-hide{ opacity:0; visibility:hidden; pointer-events:none; }
body.preload-lock{ overflow:hidden; height:100dvh; }
